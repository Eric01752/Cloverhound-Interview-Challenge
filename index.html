<!DOCTYPE html>
<html>
  <head>
    <title>React Test</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src='https://unpkg.com/babel-standalone@6.26.0/babel.js'></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const App = () => {
        const [age, setAge] = React.useState(null);

        return (
            <div>
                <AgeDisplay age={age} />
                <Form setAge={setAge} />
            </div>
        );
      }

      const Form = ({setAge}) => {
        const [name, setName] = React.useState("");

        return (
            <form
                onChange={(e) => setName(e.target.value)}
                onSubmit={(e) => {
                    if (name != "") {
                        e.preventDefault();
                        $.ajax({
                            type: "GET",
                            url: `https://api.agify.io?name=${name}`,
                            dataType: "json",
                            success: (result, status, xhr) => {
                                setAge(result["age"]);
                            },
                            error: (xhr, status, error) => {
                                alert("Result: " + status + " " + error + " " + xhr.status + " " + xhr.statusText)
                            }
                        });
                    }
                }}
            >
                <label for="name">Enter name: </label><br />
                <input type="text" name="name"></input><br />
                <button type="submit">Submit Form</button>
            </form>
        );
      }

      const AgeDisplay = ({age}) => {
        return (
            <h1>{age != null ? "Predicted age: " + age : ""}</h1>
        );
      }

      ReactDOM.render(<App />, document.querySelector('#root'));
    </script>
  </body>
</html>